<!doctype>
<html>
	<head>
	<script type='text/javascript'>

	web3.eth.defaultAccount = web3.eth.accounts[0];
	var currUser = web3.eth.defaultAccount;
	
		
	function getReputation() {
        var user = document.getElementById("users").value;
        var res = contracts["Reputation"].contract.getRepAmount(user);
        document.getElementById("queryres").innerText = res;
    }

    function setReputation() {
        var user = document.getElementById("usersMod").value;
        var changeAmount = parseInt(document.getElementById("changeAmount").value);
        var res = contracts["Reputation"].contract.changeReputation(currUser, user, changeAmount);
    }
		
	function setup() {
		var x = document.getElementById("usersMod");
		//var el = document.createElement("option");
		//var el2 = document.createElement("option");
		for (var i=0; i < web3.eth.accounts.length; i++) {
			console.log(web3.eth.accounts[i]);
			contracts["Reputation"].contract.create(web3.eth.accounts[i],1500,0)
			var option = document.createElement("option");
			option.text = "User " + (i+1);
			option.value = i;
			x.appendChild(option);
			//y.appendChild(option);
		}
		var y = document.getElementById("users");
		for (var i=0; i < web3.eth.accounts.length; i++) {
			console.log(web3.eth.accounts[i]);
			var option = document.createElement("option");
			option.text = "User " + (i+1);
			option.value = i;
			y.appendChild(option);
		}
	}
    </script>
    </head>
    <body bgcolor="#E6E6FA" onload="setup()">
        <h1>Reputations</h1>
        <div>
            Modify:
            <select id="usersMod">
			</select>
            <button onclick="setReputation()">Rep</button>
			<button onclick="setReputation()">Neg</button>
        </div>
        <div>
            From:
			<select id="users">
			</select>
			<button onclick="getReputation()">Get Reputation</button>
            <div id="queryres"></div>
        </div>
    </body>
</html>